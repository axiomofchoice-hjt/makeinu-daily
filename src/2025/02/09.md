---
title: 败犬日报 2025-02-09
prev:
  text: 败犬日报 2025-02-08
  link: 2025/02/08
next: false
---

# {{ $frontmatter.title }}

[[toc]]

## 1. `stdx::simd` 是不是运行时选择的

不是。

cppref 上的 `stdx::simd` 默认模板是 `simd_abi::compatible`，这个 compatible 的描述是保证兼容性。<https://zh.cppreference.com/w/cpp/experimental/simd/compatible>

所以大概是指最“短”的向量。

```cpp
#include <experimental/simd>
namespace stdx = std::experimental;

auto simd_add(stdx::simd<float> x, stdx::simd<float> y) {
    return x + y;
}
```

GCC 14.2 编译参数 `-std=c++23 -march=x86-64 -mavx512f -O3`，这个生成的汇编是 `vaddps  xmm0, xmm0, xmm1`，用的是 SSE 指令集。

一般情况用 `stdx::native_simd` 就行了。
